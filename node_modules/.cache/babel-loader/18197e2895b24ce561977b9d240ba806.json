{"ast":null,"code":"import _slicedToArray from \"/Users/ganlintian/Desktop/Hack20/workout-buddy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/ganlintian/Desktop/Hack20/workout-buddy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/ganlintian/Desktop/Hack20/workout-buddy/src/views/examples/Profile.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  border: 1px solid blue;\\n  width: 50%;\\n  height: 50%;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 100%;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  height: 100vh;\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport './App.css';\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\nvar Container = styled.div(_templateObject());\nvar Row = styled.div(_templateObject2());\nvar Video = styled.video(_templateObject3());\n\nfunction App() {\n  var _this = this;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      yourID = _useState2[0],\n      setYourID = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      users = _useState4[0],\n      setUsers = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      stream = _useState6[0],\n      setStream = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      receivingCall = _useState8[0],\n      setReceivingCall = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      caller = _useState10[0],\n      setCaller = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      callerSignal = _useState12[0],\n      setCallerSignal = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      callAccepted = _useState14[0],\n      setCallAccepted = _useState14[1];\n\n  var userVideo = useRef();\n  var partnerVideo = useRef();\n  var socket = useRef();\n  useEffect(function () {\n    socket.current = io.connect(\"/\");\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(function (stream) {\n      setStream(stream);\n\n      if (userVideo.current) {\n        userVideo.current.srcObject = stream;\n      }\n    });\n    socket.current.on(\"yourID\", function (id) {\n      setYourID(id);\n    });\n    socket.current.on(\"allUsers\", function (users) {\n      setUsers(users);\n    });\n    socket.current.on(\"hey\", function (data) {});\n  }, []);\n\n  function callPeer(id) {}\n\n  function acceptCall() {}\n\n  var UserVideo;\n\n  if (stream) {\n    UserVideo = /*#__PURE__*/React.createElement(Video, {\n      playsInline: true,\n      muted: true,\n      ref: userVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }\n    });\n  }\n\n  var PartnerVideo;\n\n  if (callAccepted) {\n    PartnerVideo = /*#__PURE__*/React.createElement(Video, {\n      playsInline: true,\n      ref: partnerVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    });\n  }\n\n  var incomingCall;\n\n  if (receivingCall) {\n    incomingCall = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, caller, \" is calling you\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: acceptCall,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, \"Accept\"));\n  }\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, UserVideo, PartnerVideo), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, Object.keys(users).map(function (key) {\n    if (key === yourID) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(\"button\", {\n      onClick: function onClick() {\n        return callPeer(key);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, \"Call \", key);\n  })), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, incomingCall));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/ganlintian/Desktop/Hack20/workout-buddy/src/views/examples/Profile.js"],"names":["React","useEffect","useState","useRef","io","Peer","styled","Container","div","Row","Video","video","App","yourID","setYourID","users","setUsers","stream","setStream","receivingCall","setReceivingCall","caller","setCaller","callerSignal","setCallerSignal","callAccepted","setCallAccepted","userVideo","partnerVideo","socket","current","connect","navigator","mediaDevices","getUserMedia","audio","then","srcObject","on","id","data","callPeer","acceptCall","UserVideo","PartnerVideo","incomingCall","Object","keys","map","key"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport './App.css';\r\nimport io from \"socket.io-client\";\r\nimport Peer from \"simple-peer\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n`;\r\n\r\nconst Video = styled.video`\r\n  border: 1px solid blue;\r\n  width: 50%;\r\n  height: 50%;\r\n`;\r\n\r\nfunction App() {\r\n  const [yourID, setYourID] = useState(\"\");\r\n  const [users, setUsers] = useState({});\r\n  const [stream, setStream] = useState();\r\n  const [receivingCall, setReceivingCall] = useState(false);\r\n  const [caller, setCaller] = useState(\"\");\r\n  const [callerSignal, setCallerSignal] = useState();\r\n  const [callAccepted, setCallAccepted] = useState(false);\r\n\r\n  const userVideo = useRef();\r\n  const partnerVideo = useRef();\r\n  const socket = useRef();\r\n\r\n  useEffect(() => {\r\n    socket.current = io.connect(\"/\");\r\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {\r\n      setStream(stream);\r\n      if (userVideo.current) {\r\n        userVideo.current.srcObject = stream;\r\n      }\r\n    })\r\n\r\n    socket.current.on(\"yourID\", (id) => {\r\n      setYourID(id);\r\n    })\r\n    socket.current.on(\"allUsers\", (users) => {\r\n      setUsers(users);\r\n    })\r\n\r\n    socket.current.on(\"hey\", (data) => {\r\n\r\n    })\r\n  }, []);\r\n\r\n  function callPeer(id) {\r\n\r\n  }\r\n\r\n  function acceptCall() {\r\n\r\n  }\r\n\r\n  let UserVideo;\r\n  if (stream) {\r\n    UserVideo = (\r\n      <Video playsInline muted ref={userVideo} autoPlay />\r\n    );\r\n  }\r\n\r\n  let PartnerVideo;\r\n  if (callAccepted) {\r\n    PartnerVideo = (\r\n      <Video playsInline ref={partnerVideo} autoPlay />\r\n    );\r\n  }\r\n\r\n  let incomingCall;\r\n  if (receivingCall) {\r\n    incomingCall = (\r\n      <div>\r\n        <h1>{caller} is calling you</h1>\r\n        <button onClick={acceptCall}>Accept</button>\r\n      </div>\r\n    )\r\n  }\r\n  return (\r\n    <Container>\r\n      <Row>\r\n        {UserVideo}\r\n        {PartnerVideo}\r\n      </Row>\r\n      <Row>\r\n        {Object.keys(users).map(key => {\r\n          if (key === yourID) {\r\n            return null;\r\n          }\r\n          return (\r\n            <button onClick={() => callPeer(key)}>Call {key}</button>\r\n          );\r\n        })}\r\n      </Row>\r\n      <Row>\r\n        {incomingCall}\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}